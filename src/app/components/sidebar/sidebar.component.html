<ng-container *ngIf="mode === 'over'">
  <div class="sidenav__button" (click)="opened=!opened">
    <mat-icon svgIcon="menu"/>
  </div>
</ng-container>
<mat-sidenav-container class="sidenav" [hasBackdrop]="hasBackdrop">
  <mat-sidenav [mode]="mode" [opened]="opened" class="sidenav__content">
    <a routerLink="StoneFort" routerLinkActive="active" class="sidenav__homepage">
      <div class="sidenav__title">
        <h2>Friction Report</h2>
      </div>
    </a>
    <mat-accordion multi>
      <a routerLink="map" routerLinkActive="active" class="sidenav__link">
        <mat-expansion-panel class="sidenav__panel" id="map-link" disabled="true">
          <mat-expansion-panel-header class="sidenav__header ">
              <mat-panel-title class="sidenav__header_text">
                Map
              </mat-panel-title>
          </mat-expansion-panel-header>
        </mat-expansion-panel>
      </a>
      <ng-container *ngFor="let state of states">
        <mat-expansion-panel class="sidenav__panel">
          <mat-expansion-panel-header class="sidenav__header">
            <mat-panel-title class="sidenav__header_text">
              {{state}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngFor="let area of climbingAreas; index as i; trackBy:areaByName">
            <a routerLink="{{area.name}}" routerLinkActive="active" class="sidenav__link">
              <div class="sidenav__subpanel" *ngIf="area.state===state">
                <p class="sidenav__subpanel_text">{{area.fullName}}</p>
              </div>
            </a>
          </ng-container>
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
    <div class="sidenav__footer">
      <a href="https://github.com/MajinPierce/FrictionReport-angular" rel="noopener noreferrer" aria-label="Friction Report GitHub repo" target="_blank" class="sidenav__footer_github">
        <mat-icon inline=true svgIcon="github"/>
      </a>
      <p class="sidenav__footer_separator"> | </p>
      <a href="mailto:pierce@friction.report" class="sidenav__footer_email">
        pierce@friction.report
      </a>
    </div>
  </mat-sidenav>
</mat-sidenav-container>

